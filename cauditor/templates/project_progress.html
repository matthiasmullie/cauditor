<script src="/assets/js/vendor/d3.min.js"></script>
<script src="/assets/js/vendor/d3plus.min.js"></script>
<script src="/assets/js/Cauditor.js"></script>
<script src="/assets/js/visualizations/Data.js"></script>
<script src="/assets/js/visualizations/Abstract.js"></script>
<script src="/assets/js/visualizations/lineplot/Abstract.js"></script>
<script src="/assets/js/visualizations/lineplot/Project.js"></script>

{% include 'utils/project_navbar.html' %}

{% if not commit %}
    {% include 'utils/commits_missing.html' %}
{% else %}
    <div class="chart"></div>

    <script>
        $.ajax({
            url: '/api/v1/{{ project.name }}/{{ project.default_branch }}',
            datatype: 'json',
            success: function(data) {
                var chart = new Cauditor(
                    new Cauditor.Visualization.Lineplot.Project(),
                    new Cauditor.Data(data)
                );

                chart.draw('.chart', ['{{ chart.code }}', {{ chart.range }}]);
            }
        });
    </script>
{% endif %}
